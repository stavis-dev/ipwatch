# Описание файла `app.py`

## Обзор
Файл `app.py` содержит реализацию сервиса для сбора, обработки и анализа информации об IP-адресах. Приложение использует принципы объектно-ориентированного программирования и паттерны проектирования для создания модульной и расширяемой архитектуры.

## Архитектура
Приложение построено на основе следующих компонентов:

### 1. DataProvider (Поставщик данных)
- **IPAPIProvider** - получает данные о текущем IP-адресе и провайдере через API сервиса ip-api.com
- Возвращает сырые данные в формате JSON

### 2. DataFormatter (Форматировщик данных)
- **IPDataFormatter** - преобразует сырые данные в структурированный формат
- Добавляет временную метку и отбирает только необходимые поля (ISP, IP)

### 3. DataStorage (Хранилище данных)
- **CSVDataStorage** - сохраняет данные в TSV-файл (tab-separated values)
- Автоматически создает файл с заголовками при первом запуске
- Предоставляет методы для чтения всех сохраненных IP-адресов

### 4. DataPresenter (Представление данных)
- **TableDataPresenter** - отображает данные в виде форматированной таблицы
- Показывает текущие данные и результаты проверки на совпадения

### 5. IPChecker (Проверка IP)
- **SimpleIPChecker** - проверяет наличие IP-адреса в исторических данных

### 6. MatchFinder (Поиск совпадений)
- **CSVMatchFinder** - находит все записи с указанным IP в файле данных

### 7. IPInfoService (Основной сервис)
Координирует работу всех компонентов:
1. Получает данные от провайдера
2. Форматирует данные
3. Проверяет наличие совпадений
4. Отображает результаты
5. Сохраняет данные

## Особенности реализации
- **Принцип инверсии зависимостей** - все компоненты зависят от абстракций, а не от конкретных реализаций
- **Легкость тестирования** - компоненты можно легко заменять mock-объектами
- **Расширяемость** - можно добавить новые провайдеры, форматеры или хранилища
- **Обработка ошибок** - включена базовая обработка исключений

## Формат данных
Данные сохраняются в TSV-файл с колонками:
- Timestamp (временная метка)
- ISP (провайдер)
- IP Address (IP-адрес)

## Использование
Запуск приложения:
```bash
python app.py
```

При каждом запуске приложение:
1. Получает текущий IP-адрес и информацию о провайдере
2. Проверяет, встречался ли этот IP ранее
3. Отображает результаты в консоли
4. Сохраняет данные в файл `ip_data.csv`